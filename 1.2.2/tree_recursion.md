# Tree recursion

–ü—Ä–∏–º–µ—Ä *tree recursion* –º–æ–∂–Ω–æ –≤—ã—Ä–∞–∑–∏—Ç—å —á–µ—Ä–µ–∑ –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—Å—á—ë—Ç–∞ —á–∏—Å–µ–ª –§–∏–±–æ–Ω–∞—á—á–∏.

–û–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ –º–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º

```
fib(n) = {
    0, if n = 0
    1, if n = 1
    fib(n - 1) + fib(n - 2)
}
```

–ú–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –Ω–∞ Scheme:
```scheme
(define (fib n)
 (cond ((= n 0) 0)
       ((= n 1) 1)
       (else (+ (fib (- n 1)) (fib (- n 2))))
 )
)
```
–ï—Å–ª–∏ —Ä–∞–∑–ª–æ–∂–∏—Ç—å –ø–æ–ª—É—á–∏–≤—à—É—é—Å—è –ø—Ä–æ—Ü–µ—É—Ä—É, —Ç–æ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–µ—Ä–µ–≤–æ:
![tree_recursion.gif](tree_recursion.gif)

–≠—Ç–æ –æ—á–µ–Ω—å –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∞–ª–≥–æ—Ä—Ç–∏–º, –Ω–∞–ø—Ä–∏–º–µ—Ä –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å –∫–∞–∫ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ `fib(3)` –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑.

–ú–æ–∂–Ω–æ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –ø—É—Ç—ë–º –≤–≤–æ–¥–∞ –¥–≤—É—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö `a, b`, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º—ã—Ö –∫–∞–∫ `Fib(1) = 1, Fib(2) = 2`, –∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∫ –Ω–∏–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏:

```
a <- a + b
b <- a
```

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è *n* —Ä–∞–∑, `a` –±—É–¥–µ—Ç —Ä–∞–≤–Ω—è—Ç—å—Å—è `Fib(n + 1)`, –∞ `b` - `Fib(n)`.

–ú–æ–∂–Ω–æ –≤—ã—Ä–∞–∑–∏—Ç—å —ç—Ç–æ –Ω–∞ Scheme:

```scheme
(define (fib n)
 (fib-iter 1 0 n)
)

(define (fib-iter a b count)
 (if (= count 0) 
    b
    (fib-iter (+ a b) a (- count 1))
 )
)
```
–í—Ç–æ—Ä–æ–π –º–µ—Ç–æ–¥ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è - —ç—Ç–æ –ª–∏–Ω–µ–π–Ω–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è, –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ –≤ –Ω–µ–π –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –º–µ—Ç–æ–¥–∞ —Ä–µ–∫—É—Ä—Å–∏–∏.

–û–¥–Ω–∞–∫–æ, tree recursion - –Ω–µ –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å. –ï—Å–ª–∏ –æ–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏-—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∞ –Ω–µ —á–∏—Å–ª–∞), —Ç–æ tree-recursion –æ—á–µ–Ω—å –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Scheme –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–∞ tree-recursion –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã.)

## Example: Counting change

–ó–∞–¥–∞—á–∞: –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ —Ä–∞–∑–º–µ–Ω—è—Ç—å *n* –¥–æ–ª–ª–∞—Ä–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–ª-–¥–æ–ª–ª–∞—Ä–∞, —á–µ—Ç–≤–µ—Ä—Ç–∞–∫–∏, dimes, nickels, pennies (—è –Ω–µ –∑–Ω–∞—é –ø–µ—Ä–µ–≤–æ–¥–∞ —ç—Ç–∏—Ö –µ–¥–∏–Ω–∏—Ü üòí).

–£ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä—ã. 

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–æ—Å–æ–±–æ–≤ —Ä–∞–∑–º–µ–Ω—è—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ *–∞* –∏—Å–ø–æ–ª—å–∑—É—è *n* —Ç–∏–ø–æ–≤ –º–æ–Ω–µ—Ç —Ä–∞–≤–Ω—è–µ—Ç—Å—è:
- –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–ø–æ—Å–æ–±–æ–≤ —Ä–∞–∑–º–µ–Ω—è—Ç—å *–∞* –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å–µ —Ç–∏–ø—ã –º–æ–Ω–µ—Ç –∫—Ä–æ–º–µ –ø–µ—Ä–≤–æ–≥–æ **–ø–ª—é—Å** (–¥–∞–ª–µ–µ **k)
- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–æ—Å–æ–±–æ–≤ —Ä–∞–∑–º–µ–Ω—è—Ç—å *a-d* –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å–µ —Ç–∏–ø—ã –º–æ–Ω–µ—Ç, –≥–¥–µ *d* - –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ –ø–µ—Ä–≤–æ–π –º–æ–Ω–µ—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä 0.5 –¥–æ–ª–ª–∞—Ä–∞) (–¥–∞–ª–µ–µ **kd**)

–ü–æ–ø—Ä–æ–±—É–µ–º –æ–ø–∏—Å–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è —Ä—É–±–ª—è. –ß—Ç–æ–±—ã —Ä–∞–∑–º–µ–Ω—è—Ç—å *100 –∫–æ–ø–µ–µ–∫* –º–æ–Ω–µ—Ç–∞–º–∏ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞:
- 1 –∫–æ–ø–µ–π–∫–∞ (c1)
- 10 –∫–æ–ø–µ–µ–∫ (c10)
- 50 –∫–æ–ø–µ–µ–∫ (c50)

**k1** = –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–ø–æ—Å–æ–±–æ–≤ —Ä–∞–∑–º–µ–Ω—è—Ç—å *100 –∫–æ–ø–µ–µ–∫* **c10** –∏ **c50** (–≤—Å–µ–º –∫—Ä–æ–º–µ **c1**)
**kd1** = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–æ—Å–æ–±–æ–≤ —Ä–∞–∑–º–µ–Ω—è—Ç—å *99 –∫–æ–ø–µ–µ–∫* **—Å1**, **—Å10**, **—Å50**

–í–∏–¥–∏–º, —á—Ç–æ –ø–µ—Ä–≤—ã–π —à–∞–≥ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –¥–æ —Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞, –ø–æ–∫–∞ –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤–∏–¥ –º–æ–Ω–µ—Ç—ã. –í—Ç–æ—Ä–æ–π —à–∞–≥ —Ç–∞–∫–∂–µ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –±–æ–ª–µ–µ –º–µ–Ω—å—à–∏–µ —Å—É–º–º—ã.

–ú–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º:
- –ï—Å–ª–∏ *a* == 0 -> —Å—á–∏—Ç–∞–µ–º —á—Ç–æ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± —Ä–∞–∑–º–µ–Ω—è—Ç—å
- –ï—Å–ª–∏ *a* < 0 -> —Å—á–∏—Ç–∞–µ–º —á—Ç–æ –µ—Å—Ç—å 0 —Å–ø–æ—Å–æ–±–æ–≤ —Ä–∞–∑–º–µ–Ω—è—Ç—å
- –ï—Å–ª–∏ *n* == 0 -> —Å—á–∏—Ç–∞–µ–º —á—Ç–æ 0 —Å–ø–æ—Å–æ–±–æ–≤ —Ä–∞–∑–º–µ–Ω—è—Ç—å

